# DESCRIPTION

## GOVERNMENT SUPPORT CLAUSE

This invention was made with government support under EB022573 awarded by the National Institute of Health. The government has certain rights in the invention.

## BACKGROUND

Medical image registration is important for both clinical image alignment and research that uses medical images from multiple subjects/patients. Conventional medical image registration can be time consuming and challenging for certain types of images. Therefore, more recent methods use deep learning techniques, which involve training datasets to improve the speed and accuracy of registration. However, training datasets are often unavailable or do not accurately represent the image at hand. Accordingly, there is a long-felt need in the art for improved image registration methods and systems.

## SUMMARY

In meeting the described long-felt needs, the present disclosure provides methods and systems for analyzing images. An example method may comprise inputting one or more of a first image or a second image into a fully convolutional network, and determining an updated fully convolutional network by optimizing a similarity metric associated with spatially transforming the first image to match the second image. The one or more values of the fully convolutional network may be adjusted to optimize the similarity metric. The method may comprise registering one or more of the first image or the second image based on the updated fully convolutional network.

An example system may comprise a scanning device configured to generate a first image of an object of interest. The system may comprise a computing device configured to receive the first image, input one or more of the first image or a second image into a fully convolutional network, and determine an updated fully convolutional network by optimizing a similarity metric associated with spatially transforming the first image to match the second image. The one or more values of the fully convolutional network are adjusted to optimize the similarity metric. The computing device may be configured to register one or more of the first image or the second image based on the updated fully convolutional network.

An example device may comprise one or more processors, and memory storing instructions that, when executed by the one or more processors, cause the device to input one or more of a first image or a second image into a fully convolutional network, and determine an updated fully convolutional network by optimizing a similarity metric associated with spatially transforming the first image to match the second image. The one or more values of the fully convolutional network may be adjusted to optimize the similarity metric. The instructions may further cause the device to register one or more of the first image or the second image based on the updated fully convolutional network.

Additional advantages will be set forth in part in the description which follows or may be learned by practice. It is to be understood that both the foregoing general description and the following detailed description are exemplary and explanatory only and are not restrictive.

## DETAILED DESCRIPTION OF ILLUSTRATIVE EMBODIMENTS

The present disclosure is directed to a novel non-rigid image registration algorithm that is built upon fully convolutional networks (FCNs) to optimize and learn spatial transformations between pairs of images to be registered in a self-supervised learning framework. Different from most existing deep learning based image registration methods that learn spatial transformations from training data with known corresponding spatial transformations, the disclosed method may directly estimate spatial transformations between pairs of images by maximizing an image-wise similarity metric between fixed and deformed moving images, similar to conventional image registration algorithms. The image registration may be implemented in a multi-resolution image registration framework to jointly optimize and learn spatial transformations and FCNs at different spatial resolutions with deep self-supervision through typical feedforward and backpropagation computation. The proposed method has been evaluated for registering 3D structural brain magnetic resonance (MR) images and obtained better performance than state-of-the-art image registration algorithms.

Medical image registration is typically formulated as an optimization problem to seek a spatial transformation that establishes pixel/voxel correspondence between a pair of fixed and moving images [1]. Recently, deep learning techniques have been used to build prediction models of spatial transformations for image registration under a supervised learning framework [2-4], besides learning image features for image registration using stacked autoencoders [5]. The prediction models are designed to predict spatial relationship between image pixel/voxels from a pair of images based on their image patches. The learned prediction model can then be applied to images pixel/voxel-wisely to achieve an overall image registration.

The prediction based image registration algorithms typically adopt convolutional neural networks (CNNs) to learn informative image features and a mapping between the learned image features and spatial transformations that register images in a training dataset [2-4]. Similar to most deep learning tasks, the quality of training data plays an important role in the prediction based image registration, and a variety of strategies have been proposed to build training data, specifically the spatial transformations [2-4]. However, a prediction based image registration model built upon such training datasets is limited to estimating spatial transformations captured by the train datasets themselves.

Inspired by spatial transformer network (STN) [6], deep CNNs in conjunction with STNs have been proposed recently to learn prediction models for image registration in an unsupervised fashion [7, 8]. In particular, DirNet learns CNNs by optimizing an image similarity metric between fixed and transformed moving images to estimate 2D control points of cubic B-splines for representing spatial transformations [7]. Also, ssEMnet estimates coarse-grained deformation fields at a low spatial resolution and uses bilinear interpolation to obtain dense spatial transformations for registering 2D images by optimizing an image similarity metric between feature maps of the fixed and transformed moving images [8]. However, the coarse-grained spatial transformation measures may fail to characterize fine-grained deformations between images.

Building upon fully convolutional networks (FCNs) that facilitate voxel-to-voxel learning [9], the present disclosure describes a novel deep learning based non-rigid image registration framework to learn spatial transformations between pairs of images to be registered. Different from most learning based registration methods that rely on training data, our method directly trains FCNs to estimate voxel-to-voxel spatial transformations for registering images by maximizing their image-wise similarity metric. To account for potential large deformations between images, a multi-resolution strategy is adopted to jointly learn spatial transformations at different spatial resolutions. The image similarity measures between the fixed and deformed moving images are evaluated at different image resolutions to serve as deep self-supervision. The disclosed methods may simultaneously optimize and learn spatial transformations for the image registration in an unsupervised fashion. The registration of pairs of images may also serve as a training procedure. The trained FCNs can be directly adopted to register new images using feedforward computation. As described further herein, an example disclosed method has been evaluated based on 3D structural MRI brain images.

FIG. 1 shows an example image registration framework using example FCNs. The framework and/or FCNs may be configured for voxel-to-voxel regression of deformation fields in a multi-resolution image registration framework.

Given a pair of fixed image If and moving image Im, the task of image registration is to seek a spatial transformation that establishes pixel/voxel-wise spatial correspondence between the two images. Since the spatial correspondence can be gauged with a surrogate measure, such as an image intensity similarity, the image registration task can be formulated as an optimization problem to identify a spatial transformation that maximizes the image similarity measure between the fixed image and transformed moving image. For non-rigid image registration, the spatial transformation is often characterized by a dense deformation field Dv that encodes displacement vectors between spatial coordinates of If and their counterparts of Im.

Regularization techniques are usually adopted in image registration algorithms to obtain spatially smooth and physically plausible spatial transformations [1]. As an example, a total variation based regularizer [10] may be used as follows:

R(Dv)=Σn=1N∥∇Dv(n)∥1  Eq. (1)

where N is the number of pixel/voxels in the deformation field. In general, the image registration problem is formulated as

minD−S(If(v),Im(Dv∘v))+ΔR(Dv)  Eq. (2)

where v represents spatial coordinates of pixel/voxels in If, D∘v represents deformed spatial coordinates of pixel/voxels by Dv in Im, S(I1,I2) is an image similarity measure, R(D) is a regularizer on the deformation field, and λ controls the trade-off between the image similarity measure and the regularization term.

To solve the image registration optimization problem, disclosed is a deep learning model using FCNs to learn informative image feature representations and a mapping between the feature representations and the spatial transformation between images at the same time. The registration framework of an example disclosed method is illustrated by FIG. 1 (bottom left). In particular, each pair of fixed and moving images may be concatenated as an input with two channels to the deep learning model for learning spatial transformations that optimize image similarity measures between the fixed and transformed moving images. The deep learning model may comprise one or more FCNs with de/convolutional (Conv) layers, batch normalization (BN) layers, activation (ReLU) layers, pooling layers, and multi-output regression layers. Particularly, each of the regression layer (Reg) may be implemented as a convolutional layer whose output has the same size of the input images in the spatial domain and multiple channels for encoding displacements in different spatial dimensions of the input images.

A pooling operation may be adopted in CNNs to obtain translation-invariant features and increase reception fields of the CNNs, as well as to decrease the spatial size of the CNNs to reduce the computational cost. However, the multi-output regression layers after pooling operations produce coarse outputs which may be interpolated to generate deformation fields at the same spatial resolution of the input images [7, 8]. An alternative way to obtain fine-grained deformation fields is to stack multiple convolutional layers without any pooling layers. However, such a network architecture would have more parameters to be learned and decrease the efficiency of the whole network. A deconvolutional operators may be used for upsampling [9], instead of choosing a specific interpolation scheme, such as cubic spline and bilinear interpolation [7, 8]. The example architecture may lead to a multi-resolution image registration.

As an example, normalized cross-correlation (NCC) may be used as the image similarity metric between images, and the total variation based regularizer as formulated by Eq. (1) may be adopted to regularize the deformation fields. Therefore, the loss layer may evaluate the registration loss between the fixed and deformed moving images as formulated by Eq. (2).

An example multi-resolution image registration method may be based upon FCNs with deep self-supervision, as illustrated by FIG. 1 (top right). Particularly, the first 2 pooling layers in conjunction with their preceding convolutional layers may progressively reduce the spatial size of the convolutional networks so that informative image features can be learned by the 3rd convolutional layer to predict voxel-wise displacement at the same spatial resolution of downsampled input images. And the subsequent deconvolutional layers learn informative image features for predicting spatial transformations at higher spatial resolutions.

Similar to conventional multi-resolution image registration algorithms, the similarity of registered images at different resolutions may be maximized in our network to serve as deep supervision [11], but without the need of supervised deformation field information. Such a supervised learning with surrogate supervised information may be referred to as self-supervision as disclosed herein.

Different from conventional multi-resolution image registration algorithms in which deformation fields at lower-resolutions are typically used as initialization inputs to image registration at a higher spatial resolution, the disclosed example deep learning based method may jointly optimize deformation fields at all spatial resolutions with a typical feedforward and backpropagation based deep learning setting. As the optimization of the loss function proceeds, the parameters within the network may be updated through the feedforward computation and backpropagation procedure, leading to improved prediction of deformation fields. It is worth noting that no training deformation field information is needed for the optimization, and self-supervision through maximizing image similarity with smoothness regularization of deformation fields may be the only force to drive the optimization. The trained network can be directly used to register a pair of images, and any of them can be the fixed image.

Network training is described as follows. Given a set of n images, (n−1) pairs of fixed and moving images may be obtained, such that every image can serve as a fixed image. Pairs of images may be registered using following parameters. As a non-limiting example illustrated in FIG. 1, 32, 64, 128, and 64 kernels are used for Conv layer 1, 2, 3, and 4 respectively, with kernel size 3 and stride 2. For pooling layers, kernel size is set to 3, and stride 2. 64 and 32 kernels are used for Deconv layer 1 and 2 respectively, with kernel size 3 and stride 2. Three kernels are used in the regression layers 1, 2 and 3 to obtain 3D deformation fields. The total loss is calculated as a weighted sum of loss of the 3 loss layers, with weight coefficients 1, 0.6, and 0.3 assigned to the loss layers 1, 2, and 3 respectively. It should be understood that a variety of other values may be used.

An example alternative network architecture without pooling layers may be implemented for performance comparison. Particularly, Conv layers 1 to 3, one regression layer, and one loss layer may be kept. The Conv layers may have the same parameters as described above. Moreover, alternative network architecture with pooling layers and additional one interpolation layer may also be implemented as an image registration model with coarse-grained spatial transformation, and tri-linear interpolation is adopted to upsample the coarse-grained deformation fields to the original spatial resolution.

The registration models may be built using Tensorflow [12]. Adam optimization technique may be adopted to train the networks, with learning rate set to 0.001. The networks may be trained on one Nvidia Titan Xp GPU with 10000 iteration steps. The trained FCNs could be directly used to register new images with feedforward computation.

Results for the proposed examples above are described as follows. The 1st dataset used in this study was obtained from the Alzheimer's Disease Neuroimaging Initiative (ADNI) database (http://adni.loni.usc.edu). In particular, baseline MRI data of 959 subjects were obtained from the ADNI Go & 2. T1-weighted MRI scans of all the subjects were registered to the MNI space using affine registration, and then a 3D bounding box of size 32×48×48 was adopted to extract hippocampus regions for each subject, as similarly did in a hippocampus segmentation study [13]. In addition, 100 T1 images with hippocampus segmentation labels were obtained from a preliminary release of the EADC-ADNI harmonized segmentation protocol project [14]. These images with hippocampus labels were used to evaluate image registration performance based on an overlapping metric between the hippocampus labels of registered images.

The 2nd dataset used was LPBA40 in delineation space [15]. The LPBA40 consists of 40 T1-weighted MRI brain images and their label images, each with 56 brain regions. All of these MRI brain images were registered to MNI152 space at a spatial resolution of 2×2×2 mm3 after the image intensity was normalized using histogram matching, and their label images were transformed to MNI152 space accordingly. These MRI images with their labels (excluding cerebellum and brainstem) were used to evaluate image registration performance based on an overlapping metric between the labels of registered images.

The disclosed method was compared with ANTs [16] based on the same datasets.

For the ADNI dataset, the deep learning based image registration models were trained based the ADNI GO & 2 dataset, and evaluated based on the EADC-ADNI dataset. The model was trained with a batch size of 64.

To compare our method with ANTs, one image was randomly selected from the EADC-ADNI dataset as the fixed image, and all other images were registered to the selected image. For the disclosed method, trained deep learning model was used to register these images. The deformation fields obtained were applied to register their corresponding hippocampus labels. The overlapping between the fixed and registered moving images was measured using Dice index.

The Dice index values of the hippocampus labels between images before and after registration by ANTs and our method were 0.654±0.062, 0.762±0.057, and 0.798±0.033, respectively. These results indicate that the disclosed methods identify better spatial correspondence between images. Moreover, it took ˜1 minute to register two images by ANTs on one CPU (AMD Opteron 4184 @ 2.80 Ghz), while only ˜50 ms by our model on one Titan Xp GPU.

The disclosed method was further compared to ANTs using the LPBA40 dataset. In particular, the disclosed deep learning based image registration model was trained based on 30 images, and the remaining 10 images were used as the testing images. In the training phrase, image pairs were randomly selected from 30 training images, and the batch size was set to 8. In the testing phrase, each testing image was used as the fixed image, and all the other 9 testing images were registered to it using the trained deep learning model. The ANTs algorithm was applied directly to register the testing images in the same manner, with the same ANTs command as described above. The overlap between deformed label and ground truth label for 54 regions of the testing images were calculated to evaluate the registration performance.

FIGS. 2A-D show mean brain image before and after registration by different methods. FIG. 2A shows an example fixed image. FIG. 2B shows an example mean of images before registration. FIG. 2C shows an example mean of registered images by ANTs. FIG. 2D shows an example mean of registered images based on the disclosed methods and systems.

As shown in FIG. 2B, the mean of images before registration is blurry. The means of registered images in FIGS. 2C and 2D maintain detailed image textures, and the one obtained by the proposed method has sharper contrast than that obtained by ANTs visually.

FIG. 3A-B show a dice index for 54 ROIs between all testing image pairs from the LPBA40 dataset before and after registration using ANTs and the proposed method. The mean Dice index values of all the testing images for the 54 regions of interest (ROIs) are illustrated in FIG. 3A-B. For each group of three bars, the left bar shows the dice index value for data before processing, the middle bar shows the dice index value for the data processed using ANTs, and the right bar shows the dice index value for the data processed by the disclosed approach. The Dice index values after registration were significantly higher than that before registration. For 35 out of 54 ROIs, their Dice index values obtained by our method were significantly higher than those obtained by the ANTs. No optimization was performed by the disclosed example method for registering the testing images, and it took ˜200 ms to register a pair of images.

The experimental results based on 3D structural MR images have demonstrated that the disclosed method can obtain promising image registration performance with respect to both image registration accuracy and computational speed.

FIG. 4 is a flow chart showing an example method for analyzing an image. At step 402, one or more of a first image or a second image may be input into a fully convolutional network. The first image may be based on a first imaging modality and the second image may be based on a second imaging modality different than the first imaging modality. The first image may comprise a magnetic resonance imaging (MRI) scan image and the second image comprises a computed tomography (CT) scan image.

The first image may represent a first object of interest and the second image represents a second object of interest. The first object of interest may be associated with a first patient and the second object of interest may be associated with a second patient. The first image may represent a first object of interest associated with a first time and the second image may represent the first object of interest associated with a second time different than the first time.

The fully convolutional network may be configured to apply a displacement field for registering the first image and the second image on one or more of a voxel-by-voxel or a pixel-by-pixel basis. The fully convolutional network may comprise a plurality of layers applying operations to one or more of the first image or the second image, and wherein the plurality of layers may comprise one or more of a convolution layer, a deconvolution layer, a pooling layer, a normalization layer, an activation layer, or a multi-output regression layer. The fully convolutional network may not be trained with training data before inputting one or more of the first image or the second image into the fully convolutional network.

At step 404, an updated fully convolutional network may be determined. The updated fully convolution network may be determined by optimizing a similarity metric associated with spatially transforming the first image to match the second image. One or more values of the fully convolutional network may be adjusted to optimize the similarity metric. The one or more values of the fully convolutional network may comprise one or more of a kernel size or a stride of one or more layers of the fully convolutional network. Determining the updated fully convolutional network by optimizing the similarity metric associated with spatially transforming the first image to match the second image may comprise using a self-supervision process in which a processor uses an algorithm to adjust the one or more values of the fully convolutional network until a value of the similarity metric reaches a threshold value.

At step 406, one or more of the first image or the second image may be registered based on the updated fully convolutional network. Registering one or more of first image or the second image based on the updated fully convolutional network may comprise spatially transforming the first image to at least partially match the second image.

The method 400 may further comprises determining a further updated fully convolutional network by further optimizing the similarity metric based on matching a third image to one or more of the first image, the second image, or a fourth image.

The present disclosure may be directed to any of the following aspects.

Aspect 1. A method, comprising, consisting of, or consisting essentially of: inputting one or more of a first image or a second image into a fully convolutional network; determining an updated fully convolutional network by optimizing a similarity metric associated with spatially transforming the first image to match the second image, wherein one or more values of the fully convolutional network are adjusted to optimize the similarity metric; and registering one or more of the first image or the second image based on the updated fully convolutional network.

Aspect 2. The method of Aspect 1, wherein the fully convolutional network is configured to apply a displacement field for registering the first image and the second image on one or more of a voxel-by-voxel or a pixel-by-pixel basis.

Aspect 3. The method of any one of claims 1-2, wherein the first image is based on a first imaging modality and the second image is based on a second imaging modality different than the first imaging modality.

Aspect 4. The method of any one of Aspects 1-3, wherein the first image comprises a magnetic resonance imaging (MRI) scan image and the second image comprises a computed tomography (CT) scan image.

Aspect 5. The method of any one of Aspects 1-4, wherein the first image represents a first object of interest and the second image represents a second object of interest.

Aspect 6. The method of Aspect 5, wherein the first object of interest is associated with a first patient and the second object of interest is associated with a second patient.

Aspect 7. The method of any one of Aspects 1-6, wherein the first image represents a first object of interest associated with a first time and the second image represents the first object of interest associated with a second time different than the first time.

Aspect 8. The method of any one of Aspects 1-7, wherein registering one or more of first image or the second image based on the updated fully convolutional network comprises spatially transforming the first image to at least partially match the second image.

Aspect 9. The method of any one of Aspects 1-8, wherein the one or more values of the fully convolutional network comprise one or more of a kernel size or a stride of one or more layers of the fully convolutional network.

Aspect 10. The method of any one of Aspects 1-9, wherein the fully convolutional network comprises a plurality of layers applying operations to one or more of the first image or the second image, and wherein the plurality of layers comprises one or more of a convolution layer, a deconvolution layer, a pooling layer, a normalization layer, an activation layer, or a multi-output regression layer.

Aspect 11. The method of any one of Aspects 1-10, wherein the fully convolutional network is not trained with training data before inputting one or more of the first image or the second image into the fully convolutional network.

Aspect 12. The method of any one of Aspects 1-11, further comprising: determining a further updated fully convolutional network by further optimizing the similarity metric based on matching a third image to one or more of the first image, the second image, or a fourth image.

Aspect 13. The method of any one of Aspects 1-12, wherein determining the updated fully convolutional network by optimizing the similarity metric associated with spatially transforming the first image to match the second image comprises using a self-supervision process in which a processor uses an algorithm to adjust the one or more values of the fully convolutional network until a value of the similarity metric reaches a threshold value.

Aspect 14. A system, comprising, consisting of, or consisting essentially of: a scanning device configured to generate a first image of an object of interest; and a computing device configured to: receive the first image; input one or more of the first image or a second image into a fully convolutional network: determine an updated fully convolutional network by optimizing a similarity metric associated with spatially transforming the first image to match the second image, wherein one or more values of the fully convolutional network are adjusted to optimize the similarity metric: and register one or more of the first image or the second image based on the updated fully convolutional network.

Aspect 15. The system of Aspect 14, wherein the fully convolutional network is configured to apply a displacement field for registering the first image and the second image on one or more of a voxel-by-voxel or a pixel-by-pixel basis.

Aspect 16. The system of any one of Aspects 14-15, wherein the first image is based on a first imaging modality and the second image is based on a second imaging modality different than the first imaging modality.

Aspect 17. The system of any one of Aspects 14-16, wherein the first image comprises a magnetic resonance imaging (MRI) scan image and the second image comprises a computed tomography (CT) scan image.

Aspect 18. The system of any one of Aspects 14-17, wherein the first image represents a first object of interest and the second image represents a second object of interest.

Aspect 19. The system of Aspect 18, wherein the first object of interest is associated with a first patient and the second object of interest is associated with a second patient.

Aspect 20. The system of any one of Aspects 14-19, wherein the first image represents a first object of interest associated with a first time and the second image represents the first object of interest associated with a second time different than the first time.

Aspect 21. The system of any one of Aspects 14-20, wherein registering one or more of first image or the second image based on the updated fully convolutional network comprises spatially transforming the first image to at least partially match the second image.

Aspect 22. The system of any one of Aspects 14-21, wherein the one or more values of the fully convolutional network comprise one or more of a kernel size or a stride of one or more layers of the fully convolutional network.

Aspect 23. The system of any one of Aspects 14-22, wherein the fully convolutional network comprises a plurality of layers applying operations to one or more of the first image or the second image, and wherein the plurality of layers comprises one or more of a convolution layer, a deconvolution layer, a pooling layer, a normalization layer, an activation layer, or a multi-output regression layer.

Aspect 24. The system of any one of Aspects 14-23, wherein the fully convolutional network is not trained with training data before inputting one or more of the first image or the second image into the fully convolutional network.

Aspect 25. The system of any one of Aspects 14-24, wherein the computing device is further configured to determine a further updated fully convolutional network by further optimizing the similarity metric based on matching a third image to one or more of the first image, the second image, or a fourth image.

Aspect 26. The system of any one of Aspects 14-25, wherein determining the updated fully convolutional network by optimizing the similarity metric associated with spatially transforming the first image to match the second image comprises using a self-supervision process in which a processor uses an algorithm to adjust the one or more values of the fully convolutional network until a value of the similarity metric reaches a threshold value.

Aspect 27. A device, comprising, consisting of, or consisting essentially of: one or more processors; and memory storing instructions that, when executed by the one or more processors, cause the device to: input one or more of a first image or a second image into a fully convolutional network; determine an updated fully convolutional network by optimizing a similarity metric associated with spatially transforming the first image to match the second image, wherein one or more values of the fully convolutional network are adjusted to optimize the similarity metric; and register one or more of the first image or the second image based on the updated fully convolutional network.

Aspect 28. The system of Aspect 27, wherein the fully convolutional network is configured to apply a displacement field for registering the first image and the second image on one or more of a voxel-by-voxel or a pixel-by-pixel basis.

Aspect 29. The system of any one of Aspects 27-28, wherein the first image is based on a first imaging modality and the second image is based on a second imaging modality different than the first imaging modality.

Aspect 30. The system of any one of Aspects 27-29, wherein the first image comprises a magnetic resonance imaging (MRI) scan image and the second image comprises a computed tomography (CT) scan image.

Aspect 31. The system of any one of Aspects 27-30, wherein the first image represents a first object of interest and the second image represents a second object of interest.

Aspect 32. The system of claim 31, wherein the first object of interest is associated with a first patient and the second object of interest is associated with a second patient.

Aspect 33. The system of any one of Aspects 27-32, wherein the first image represents a first object of interest associated with a first time and the second image represents the first object of interest associated with a second time different than the first time.

Aspect 34. The system of any one of Aspects 27-33, wherein registering one or more of first image or the second image based on the updated fully convolutional network comprises spatially transforming the first image to at least partially match the second image.

Aspect 35. The system of any one of Aspects 27-34, wherein the one or more values of the fully convolutional network comprise one or more of a kernel size or a stride of one or more layers of the fully convolutional network.

Aspect 36. The system of any one of Aspects 27-35, wherein the fully convolutional network comprises a plurality of layers applying operations to one or more of the first image or the second image, and wherein the plurality of layers comprises one or more of a convolution layer, a deconvolution layer, a pooling layer, a normalization layer, an activation layer, or a multi-output regression layer.

Aspect 37. The system of any one of Aspects 27-36, wherein the fully convolutional network is not trained with training data before inputting one or more of the first image or the second image into the fully convolutional network.

Aspect 38. The system of any one of Aspects 27-37, wherein the instructions are further configured to cause the device to determine a further updated fully convolutional network by further optimizing the similarity metric based on matching a third image to one or more of the first image, the second image, or a fourth image.

Aspect 39. The system of any one of Aspects 27-38, wherein determining the updated fully convolutional network by optimizing the similarity metric associated with spatially transforming the first image to match the second image comprises using a self-supervision process in which a processor uses an algorithm to adjust the one or more values of the fully convolutional network until a value of the similarity metric reaches a threshold value.

FIG. 5 depicts a computing device that may be used in various aspects, such as to implement the methods, systems, and architectures described herein. The computer architecture shown in FIG. 5 shows a conventional server computer, workstation, desktop computer, laptop, tablet, network appliance, PDA, e-reader, digital cellular phone, or other computing node, and may be utilized to execute any aspects of the computers described herein, such as to implement the methods described in relation to FIGS. 1-4.

The computing device 500 may include a baseboard, or “motherboard,” which is a printed circuit board to which a multitude of components or devices may be connected by way of a system bus or other electrical communication paths. One or more central processing units (CPUs) 504 may operate in conjunction with a chipset 506. The CPU(s) 504 may be standard programmable processors that perform arithmetic and logical operations necessary for the operation of the computing device 500.

The CPU(s) 504 may perform the necessary operations by transitioning from one discrete physical state to the next through the manipulation of switching elements that differentiate between and change these states. Switching elements may generally include electronic circuits that maintain one of two binary states, such as flip-flops, and electronic circuits that provide an output state based on the logical combination of the states of one or more other switching elements, such as logic gates. These basic switching elements may be combined to create more complex logic circuits including registers, adders-subtractors, arithmetic logic units, floating-point units, and the like.

The CPU(s) 504 may be augmented with or replaced by other processing units, such as GPU(s) 505. The GPU(s) 505 may comprise processing units specialized for but not necessarily limited to highly parallel computations, such as graphics and other visualization-related processing.

A chipset 506 may provide an interface between the CPU(s) 504 and the remainder of the components and devices on the baseboard. The chipset 506 may provide an interface to a random access memory (RAM) 508 used as the main memory in the computing device 500. The chipset 506 may further provide an interface to a computer-readable storage medium, such as a read-only memory (ROM) 520 or non-volatile RAM (NVRAM) (not shown), for storing basic routines that may help to start up the computing device 500 and to transfer information between the various components and devices. ROM 520 or NVRAM may also store other software components necessary for the operation of the computing device 500 in accordance with the aspects described herein.

The computing device 500 may operate in a networked environment using logical connections to remote computing nodes and computer systems through local area network (LAN) 516. The chipset 506 may include functionality for providing network connectivity through a network interface controller (NIC) 522, such as a gigabit Ethernet adapter. A NIC 522 may be capable of connecting the computing device 500 to other computing nodes over a network 516. It should be appreciated that multiple NICs 522 may be present in the computing device 500, connecting the computing device to other types of networks and remote computer systems.

The computing device 500 may be connected to a mass storage device 528 that provides non-volatile storage for the computer. The mass storage device 528 may store system programs, application programs, other program modules, and data, which have been described in greater detail herein. The mass storage device 528 may be connected to the computing device 500 through a storage controller 524 connected to the chipset 506. The mass storage device 528 may consist of one or more physical storage units. A storage controller 524 may interface with the physical storage units through a serial attached SCSI (SAS) interface, a serial advanced technology attachment (SATA) interface, a fiber channel (FC) interface, or other type of interface for physically connecting and transferring data between computers and physical storage units.

The computing device 500 may store data on a mass storage device 528 by transforming the physical state of the physical storage units to reflect the information being stored. The specific transformation of a physical state may depend on various factors and on different implementations of this description. Examples of such factors may include, but are not limited to, the technology used to implement the physical storage units and whether the mass storage device 528 is characterized as primary or secondary storage and the like.

For example, the computing device 500 may store information to the mass storage device 528 by issuing instructions through a storage controller 524 to alter the magnetic characteristics of a particular location within a magnetic disk drive unit, the reflective or refractive characteristics of a particular location in an optical storage unit, or the electrical characteristics of a particular capacitor, transistor, or other discrete component in a solid-state storage unit. Other transformations of physical media are possible without departing from the scope and spirit of the present description, with the foregoing examples provided only to facilitate this description. The computing device 500 may further read information from the mass storage device 528 by detecting the physical states or characteristics of one or more particular locations within the physical storage units.

In addition to the mass storage device 528 described above, the computing device 500 may have access to other computer-readable storage media to store and retrieve information, such as program modules, data structures, or other data. It should be appreciated by those skilled in the art that computer-readable storage media may be any available media that provides for the storage of non-transitory data and that may be accessed by the computing device 500.

By way of example and not limitation, computer-readable storage media may include volatile and non-volatile, transitory computer-readable storage media and non-transitory computer-readable storage media, and removable and non-removable media implemented in any method or technology. Computer-readable storage media includes, but is not limited to, RAM, ROM, erasable programmable ROM (“EPROM”), electrically erasable programmable ROM (“EEPROM”), flash memory or other solid-state memory technology, compact disc ROM (“CD-ROM”), digital versatile disk (“DVD”), high definition DVD (“HD-DVD”), BLU-RAY, or other optical storage, magnetic cassettes, magnetic tape, magnetic disk storage, other magnetic storage devices, or any other medium that may be used to store the desired information in a non-transitory fashion.

A mass storage device, such as the mass storage device 528 depicted in FIG. 5, may store an operating system utilized to control the operation of the computing device 500. The operating system may comprise a version of the LINUX operating system. The operating system may comprise a version of the WINDOWS SERVER operating system from the MICROSOFT Corporation. According to further aspects, the operating system may comprise a version of the UNIX operating system. Various mobile phone operating systems, such as IOS and ANDROID, may also be utilized. It should be appreciated that other operating systems may also be utilized. The mass storage device 528 may store other system or application programs and data utilized by the computing device 500.

The mass storage device 528 or other computer-readable storage media may also be encoded with computer-executable instructions, which, when loaded into the computing device 500, transforms the computing device from a general-purpose computing system into a special-purpose computer capable of implementing the aspects described herein. These computer-executable instructions transform the computing device 500 by specifying how the CPU(s) 504 transition between states, as described above. The computing device 500 may have access to computer-readable storage media storing computer-executable instructions, which, when executed by the computing device 500, may perform the methods described in relation to FIGS. 1-4.

A computing device, such as the computing device 500 depicted in FIG. 5, may also include an input/output controller 532 for receiving and processing input from a number of input devices, such as a keyboard, a mouse, a touchpad, a touch screen, an electronic stylus, or other type of input device. Similarly, an input/output controller 532 may provide output to a display, such as a computer monitor, a flat-panel display, a digital projector, a printer, a plotter, or other type of output device. It will be appreciated that the computing device 500 may not include all of the components shown in FIG. 5, may include other components that are not explicitly shown in FIG. 5, or may utilize an architecture completely different than that shown in FIG. 5.

As described herein, a computing device may be a physical computing device, such as the computing device 500 of FIG. 5. A computing node may also include a virtual machine host process and one or more virtual machine instances. Computer-executable instructions may be executed by the physical hardware of a computing device indirectly through interpretation and/or execution of instructions stored and executed in the context of a virtual machine.

The computing device 500 may receive image data via the network 516. For example, a scanning device 534 may be configured to generate image data by scanning one or more objects of interest. The scanning device 534 may comprise a MRI device, a CT device, an x-ray device, a camera, and/or the like. The image data may be received and processed by the management component 510, which may be configured to process the image data based on the disclosed methods and techniques. For example, the image data may be registered using the disclosed methods and techniques. The registered image data may be sent to another device, such as a user device, and/or may be displayed via a monitor.

It is to be understood that the methods and systems are not limited to specific methods, specific components, or to particular implementations. It is also to be understood that the terminology used herein is for the purpose of describing particular embodiments only and is not intended to be limiting.

As used in the specification and the appended claims, the singular forms “a,” “an,” and “the” include plural referents unless the context clearly dictates otherwise. Ranges may be expressed herein as from “about” one particular value, and/or to “about” another particular value. When such a range is expressed, another embodiment includes from the one particular value and/or to the other particular value. Similarly, when values are expressed as approximations, by use of the antecedent “about,” it will be understood that the particular value forms another embodiment. It will be further understood that the endpoints of each of the ranges are significant both in relation to the other endpoint, and independently of the other endpoint.

“Optional” or “optionally” means that the subsequently described event or circumstance may or may not occur, and that the description includes instances where said event or circumstance occurs and instances where it does not.

Throughout the description and claims of this specification, the word “comprise” and variations of the word, such as “comprising” and “comprises,” means “including but not limited to,” and is not intended to exclude, for example, other components, integers or steps. “Exemplary” means “an example of” and is not intended to convey an indication of a preferred or ideal embodiment. “Such as” is not used in a restrictive sense, but for explanatory purposes.

Components are described that may be used to perform the described methods and systems. When combinations, subsets, interactions, groups, etc., of these components are described, it is understood that while specific references to each of the various individual and collective combinations and permutations of these may not be explicitly described, each is specifically contemplated and described herein, for all methods and systems. This applies to all aspects of this application including, but not limited to, operations in described methods. Thus, if there are a variety of additional operations that may be performed it is understood that each of these additional operations may be performed with any specific embodiment or combination of embodiments of the described methods.

As will be appreciated by one skilled in the art, the methods and systems may take the form of an entirely hardware embodiment, an entirely software embodiment, or an embodiment combining software and hardware aspects. Furthermore, the methods and systems may take the form of a computer program product on a computer-readable storage medium having computer-readable program instructions (e.g., computer software) embodied in the storage medium. More particularly, the present methods and systems may take the form of web-implemented computer software. Any suitable computer-readable storage medium may be utilized including hard disks. CD-ROMs, optical storage devices, or magnetic storage devices.

Embodiments of the methods and systems are described below with reference to block diagrams and flowchart illustrations of methods, systems, apparatuses and computer program products. It will be understood that each block of the block diagrams and flowchart illustrations, and combinations of blocks in the block diagrams and flowchart illustrations, respectively, may be implemented by computer program instructions. These computer program instructions may be loaded on a general-purpose computer, special-purpose computer, or other programmable data processing apparatus to produce a machine, such that the instructions which execute on the computer or other programmable data processing apparatus create a means for implementing the functions specified in the flowchart block or blocks.

These computer program instructions may also be stored in a computer-readable memory that may direct a computer or other programmable data processing apparatus to function in a particular manner, such that the instructions stored in the computer-readable memory produce an article of manufacture including computer-readable instructions for implementing the function specified in the flowchart block or blocks. The computer program instructions may also be loaded onto a computer or other programmable data processing apparatus to cause a series of operational steps to be performed on the computer or other programmable apparatus to produce a computer-implemented process such that the instructions that execute on the computer or other programmable apparatus provide steps for implementing the functions specified in the flowchart block or blocks.

The various features and processes described above may be used independently of one another, or may be combined in various ways. All possible combinations and sub-combinations are intended to fall within the scope of this disclosure. In addition, certain methods or process blocks may be omitted in some implementations. The methods and processes described herein are also not limited to any particular sequence, and the blocks or states relating thereto may be performed in other sequences that are appropriate. For example, described blocks or states may be performed in an order other than that specifically described, or multiple blocks or states may be combined in a single block or state. The example blocks or states may be performed in serial, in parallel, or in some other manner. Blocks or states may be added to or removed from the described example embodiments. The example systems and components described herein may be configured differently than described. For example, elements may be added to, removed from, or rearranged compared to the described example embodiments.

It will also be appreciated that various items are illustrated as being stored in memory or on storage while being used, and that these items or portions thereof may be transferred between memory and other storage devices for purposes of memory management and data integrity. Alternatively, in other embodiments, some or all of the software modules and/or systems may execute in memory on another device and communicate with the illustrated computing systems via inter-computer communication. Furthermore, in some embodiments, some or all of the systems and/or modules may be implemented or provided in other ways, such as at least partially in firmware and/or hardware, including, but not limited to, one or more application-specific integrated circuits (“ASICs”), standard integrated circuits, controllers (e.g., by executing appropriate instructions, and including microcontrollers and/or embedded controllers), field-programmable gate arrays (“FPGAs”), complex programmable logic devices (“CPLDs”), etc. Some or all of the modules, systems, and data structures may also be stored (e.g., as software instructions or structured data) on a computer-readable medium, such as a hard disk, a memory, a network, or a portable media article to be read by an appropriate device or via an appropriate connection. The systems, modules, and data structures may also be transmitted as generated data signals (e.g., as part of a carrier wave or other analog or digital propagated signal) on a variety of computer-readable transmission media, including wireless-based and wired/cable-based media, and may take a variety of forms (e.g., as part of a single or multiplexed analog signal, or as multiple discrete digital packets or frames). Such computer program products may also take other forms in other embodiments. Accordingly, the present invention may be practiced with other computer system configurations.

While the methods and systems have been described in connection with preferred embodiments and specific examples, it is not intended that the scope be limited to the particular embodiments set forth, as the embodiments herein are intended in all respects to be illustrative rather than restrictive.

Unless otherwise expressly stated, it is in no way intended that any method set forth herein be construed as requiring that its operations be performed in a specific order. Accordingly, where a method claim does not actually recite an order to be followed by its operations or it is not otherwise specifically stated in the claims or descriptions that the operations are to be limited to a specific order, it is no way intended that an order be inferred, in any respect. This holds for any possible non-express basis for interpretation, including: matters of logic with respect to arrangement of steps or operational flow; plain meaning derived from grammatical organization or punctuation; and the number or type of embodiments described in the specification.

It will be apparent to those skilled in the art that various modifications and variations may be made without departing from the scope or spirit of the present disclosure. Other embodiments will be apparent to those skilled in the art from consideration of the specification and practices described herein. It is intended that the specification and example figures be considered as exemplary only, with a true scope and spirit being indicated by the following claims.

